(lp0
(S'ResetRhythmChk'
p1
(lp2
S'BeatCount = 0 ;'
p3
aS'ClassifyState = LEARNING ;'
p4
aS'}'
p5
atp6
a(S'RhythmChk'
p7
(lp8
S'int i, regular = 1 ;'
p9
aS'int NNEst, NVEst ;'
p10
aS''
p11
aS'BigeminyFlag = 0 ;'
p12
ag11
aS'// Wait for at least 4 beats before classifying anything.'
p13
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS'// Stick the new RR interval into the RR interval Buffer.'
p14
ag11
ag11
aS'{'
p15
ag11
ag11
ag11
ag11
aS'RRBuffer[0] = rr ;'
p16
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS"// If we couldn't tell what the last interval was..."
p17
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS'// If the previous two beats were normal...'
p18
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS'// If the previous beat was a PVC...'
p19
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS'// If the previous beat followed a PVC or couplet etc...'
p20
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS'// Otherwise the previous interval must have been a VV'
p21
ag11
aS'else'
p22
ag15
ag11
aS'// Does this match previous VV.'
p23
ag11
ag11
ag11
ag11
ag11
ag11
ag11
aS"// If this doesn't match a previous VV interval, assume"
p24
aS'// any new interval is recovery to Normal beat.'
p25
ag11
aS'else'
p26
ag15
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag5
ag5
ag5
atp27
a(S'RRMatch'
p28
(lp29
g11
ag11
ag11
ag5
atp30
a(S'RRShort'
p31
(lp32
g11
ag11
ag11
ag5
atp33
a(S'IsBigeminy'
p34
(lp35
S'return(BigeminyFlag) ;'
p36
ag5
atp37
a(S'RRShort2'
p38
(lp39
S'int rrMean = 0, i, nnCount ;'
p40
ag11
ag11
ag11
ag11
aS'++nnCount ;'
p41
aS'rrMean += rrIntervals[i] ;'
p42
ag5
ag11
aS"// Return if there aren't at least 4 normal intervals."
p43
ag11
ag11
ag11
aS'rrMean >>= 2 ;'
p44
ag11
ag11
ag11
ag11
ag11
ag11
ag11
ag5
ag11
ag11
ag11
ag11
aS'return(0) ;'
p45
ag5
atp46
a(S'RRMatch2'
p47
(lp48
g11
ag11
ag11
ag5
atp49
a.