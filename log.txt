(lp0
(lp1
S'InitRingBuffer'
p2
aS'addValue'
p3
aS'MeanValue'
p4
aS'MeanValueOfLast'
p5
aa(lp6
(dp7
S'finalcost'
p8
(dp9
S'division'
p10
I0
sS'return'
p11
I0
sS'addition'
p12
I0
sS'varassignment'
p13
I7
sS'bitshift'
p14
I0
sS'multiplication'
p15
I0
sS'incrementation'
p16
I5
sS'if'
p17
I5
ssS'costs'
p18
(dp19
S'baseline'
p20
(dp21
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sS'amount'
p22
I1
sg15
I0
sg16
I0
ssS'for'
p23
(lp24
(dp25
S'bodycost'
p26
(dp27
g8
(dp28
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp29
g20
(dp30
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp31
sS'while'
p32
(lp33
sS'switch'
p34
(lp35
sS'other_functions'
p36
(dp37
sg17
(lp38
ssS'name'
p39
S'InitRingBuffer for: 1'
p40
sS'in file'
p41
S'ringBuffer.c'
p42
ssS'numloops'
p43
I5
sS'default'
p44
S'yes'
p45
sg8
(dp46
g10
I0
sg11
I0
sg12
I0
sg13
I6
sg14
I0
sg15
I0
sg16
I5
sg17
I5
ssS'conditions'
p47
S'tor (i = 0; i < RINGBUFFER_SIZE; ++i)'
p48
sS'optioncost'
p49
(dp50
g8
(dp51
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg15
I0
sg16
I1
sg17
I0
ssg18
(dp52
g20
(dp53
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I1
ssg23
(lp54
sg32
(lp55
sg34
(lp56
sg36
(dp57
sg17
(lp58
ssg39
S'for conditions'
p59
sg41
g42
ssasg32
(lp60
sg34
(lp61
sg36
(dp62
sg17
(lp63
ssg39
g2
sg41
g42
sa(dp64
g8
(dp65
g10
I0
sg11
I0
sg12
I0
sg13
I2
sg14
I0
sg15
I0
sg16
I1
sg17
I1
ssg18
(dp66
g20
(dp67
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I1
ssg23
(lp68
sg32
(lp69
sg34
(lp70
sg36
(dp71
sg17
(lp72
(dp73
S'options'
p74
(lp75
(dp76
g8
(dp77
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp78
g20
(dp79
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp80
sg32
(lp81
sg34
(lp82
sg36
(dp83
sg17
(lp84
ssg39
S'addValue if: 1 option: 1'
p85
sg41
g42
sasS'condition'
p86
S'if (RingBufferCurrent >= RINGBUFFER_SIZE)'
p87
sassg39
g3
sg41
g42
sa(dp88
g8
(dp89
g10
I1
sg11
I1
sg12
I5
sg13
I13
sg14
I0
sg15
I0
sg16
I10
sg17
I11
ssg18
(dp90
g20
(dp91
g10
I1
sg11
I1
sg12
I0
sg13
I2
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp92
(dp93
g26
(dp94
g8
(dp95
g10
I0
sg11
I0
sg12
I1
sg13
I2
sg14
I0
sg15
I0
sg16
I1
sg17
I1
ssg18
(dp96
g20
(dp97
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp98
sg32
(lp99
sg34
(lp100
sg36
(dp101
sg17
(lp102
(dp103
g74
(lp104
(dp105
g8
(dp106
g10
I0
sg11
I0
sg12
I1
sg13
I1
sg14
I0
sg15
I0
sg16
I1
sg17
I0
ssg18
(dp107
g20
(dp108
g10
I0
sg11
I0
sg12
I1
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I1
ssg23
(lp109
sg32
(lp110
sg34
(lp111
sg36
(dp112
sg17
(lp113
ssg39
S'MeanValue for: 1 if: 1 option: 1'
p114
sg41
g42
sasg86
S'if (RingBuffer[i] != INVALID_VALUE)'
p115
sassg39
S'MeanValue for: 1'
p116
sg41
g42
ssg43
I5
sg44
g45
sg8
(dp117
g10
I0
sg11
I0
sg12
I5
sg13
I11
sg14
I0
sg15
I0
sg16
I10
sg17
I10
ssg47
S'tor (i = 0; i < RINGBUFFER_SIZE; ++i)'
p118
sg49
(dp119
g8
(dp120
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg15
I0
sg16
I1
sg17
I0
ssg18
(dp121
g20
(dp122
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I1
ssg23
(lp123
sg32
(lp124
sg34
(lp125
sg36
(dp126
sg17
(lp127
ssg39
g59
sg41
g42
ssasg32
(lp128
sg34
(lp129
sg36
(dp130
sg17
(lp131
(dp132
g74
(lp133
(dp134
g8
(dp135
g10
I0
sg11
I0
sg12
I0
sg13
I0
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp136
g20
(dp137
g10
I0
sg11
I0
sg12
I0
sg13
I0
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp138
sg32
(lp139
sg34
(lp140
sg36
(dp141
sg17
(lp142
ssg39
S'MeanValue if: 1 option: 1'
p143
sg41
g42
sasg86
S'if (nrValues == 0)'
p144
sassg39
g4
sg41
g42
sa(dp145
g8
(dp146
g10
I1
sg11
I1
sg12
I10
sg13
I20
sg14
I0
sg15
I0
sg16
I10
sg17
I26
ssg18
(dp147
g20
(dp148
g10
I1
sg11
I1
sg12
I0
sg13
I3
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp149
sg32
(lp150
(dp151
g26
(dp152
g8
(dp153
g10
I0
sg11
I0
sg12
I2
sg13
I3
sg14
I0
sg15
I0
sg16
I2
sg17
I3
ssg18
(dp154
g20
(dp155
g10
I0
sg11
I0
sg12
I0
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I1
ssg23
(lp156
sg32
(lp157
sg34
(lp158
sg36
(dp159
sg17
(lp160
(dp161
g74
(lp162
(dp163
g8
(dp164
g10
I0
sg11
I0
sg12
I1
sg13
I1
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp165
g20
(dp166
g10
I0
sg11
I0
sg12
I1
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp167
sg32
(lp168
sg34
(lp169
sg36
(dp170
sg17
(lp171
ssg39
S'MeanValueOfLastdo while: 1 if: 1 option: 1'
p172
sg41
g42
sa(dp173
g8
(dp174
g10
I0
sg11
I0
sg12
I0
sg13
I0
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp175
g20
(dp176
g10
I0
sg11
I0
sg12
I0
sg13
I0
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp177
sg32
(lp178
sg34
(lp179
sg36
(dp180
sg17
(lp181
ssg39
S'MeanValueOfLastdo while: 1 if: 1 option: 2'
p182
sg41
g42
sasg86
S'if (i == 0)'
p183
sa(dp184
g74
(lp185
(dp186
g8
(dp187
g10
I0
sg11
I0
sg12
I1
sg13
I1
sg14
I0
sg15
I0
sg16
I1
sg17
I0
ssg18
(dp188
g20
(dp189
g10
I0
sg11
I0
sg12
I1
sg13
I1
sg14
I0
sg22
I1
sg15
I0
sg16
I1
ssg23
(lp190
sg32
(lp191
sg34
(lp192
sg36
(dp193
sg17
(lp194
ssg39
S'MeanValueOfLastdo while: 1 if: 2 option: 1'
p195
sg41
g42
sasg86
S'if (RingBuffer[i] != INVALID_VALUE)'
p196
sassg39
S'MeanValueOfLastdo while: 1'
p197
sg41
g42
ssg43
I5
sg44
g45
sg8
(dp198
g10
I0
sg11
I0
sg12
I10
sg13
I17
sg14
I0
sg15
I0
sg16
I10
sg17
I25
ssg47
S'vhile (nrValues != LAST_MEAN_VALUES && i != RingBufferCurrent);'
p199
sg49
(dp200
g8
(dp201
g10
I0
sg11
I0
sg12
I0
sg13
I2
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp202
g20
(dp203
g10
I0
sg11
I0
sg12
I0
sg13
I2
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp204
sg32
(lp205
sg34
(lp206
sg36
(dp207
sg17
(lp208
ssg39
S'do while conditions'
p209
sg41
g42
ssasg34
(lp210
sg36
(dp211
sg17
(lp212
(dp213
g74
(lp214
(dp215
g8
(dp216
g10
I0
sg11
I0
sg12
I0
sg13
I0
sg14
I0
sg15
I0
sg16
I0
sg17
I0
ssg18
(dp217
g20
(dp218
g10
I0
sg11
I0
sg12
I0
sg13
I0
sg14
I0
sg22
I1
sg15
I0
sg16
I0
ssg23
(lp219
sg32
(lp220
sg34
(lp221
sg36
(dp222
sg17
(lp223
ssg39
S'MeanValueOfLast if: 1 option: 1'
p224
sg41
g42
sasg86
S'if (i == RingBufferCurrent)'
p225
sassg39
g5
sg41
g42
saa(lp226
g42
aa(lp227
(lp228
S'#include <stdint.h>'
p229
aS'#include <limits.h>'
p230
aS''
p231
aS'#ifndef RINGBUFFER_SIZE'
p232
aS'#define RINGBUFFER_SIZE 300'
p233
aS'#endif'
p234
aS'#define INVALID_VALUE SHRT_MIN //-32767 can not be reached with 6g Acc.'
p235
aS'#define LAST_MEAN_VALUES 3'
p236
ag231
aS'static int16_t RingBuffer[RINGBUFFER_SIZE];'
p237
aS'static uint16_t RingBufferCurrent; // points to the last added data point'
p238
ag231
aS'void InitRingBuffer(void)'
p239
aS'{'
p240
aS'uint16_t i;'
p241
ag231
aS'// RingBufferCurrent = &RingBuffer[0];'
p242
aS'RingBufferCurrent = 0;'
p243
aS'for (i = 0; i < RINGBUFFER_SIZE; ++i)'
p244
aS'RingBuffer[i] = INVALID_VALUE;'
p245
aS'}'
p246
ag231
aS'/**'
p247
aS'* Insert new Data into ring buffer'
p248
aS'*/'
p249
aS'void addValue(int16_t Value)'
p250
ag240
aS'RingBuffer[RingBufferCurrent++] = Value;'
p251
ag87
aS'RingBufferCurrent = 0;'
p252
ag246
ag231
aS'int MeanValue(void)'
p253
ag240
aS'uint16_t i;'
p254
aS'unsigned char nrValues = 0;'
p255
aS'long Summ = 0;'
p256
ag231
aS'for (i = 0; i < RINGBUFFER_SIZE; ++i)'
p257
ag240
ag115
ag240
aS'Summ += RingBuffer[i];'
p258
aS'nrValues++;'
p259
ag246
ag246
ag231
ag144
ag231
aS'return Summ / nrValues;'
p260
ag246
ag231
aS'int MeanValueOfLast(void)'
p261
ag240
aS'long Summ = 0;'
p262
aS'uint16_t i = RingBufferCurrent;'
p263
aS'unsigned char nrValues = 0;'
p264
ag231
aS'do'
p265
ag240
ag183
aS'i = RINGBUFFER_SIZE - 1;'
p266
aS'else'
p267
aS'--i;'
p268
ag231
ag196
ag240
aS'Summ += RingBuffer[i];'
p269
aS'nrValues++;'
p270
ag246
aS'} while (nrValues != LAST_MEAN_VALUES && i != RingBufferCurrent);'
p271
ag231
ag225
aS'return INVALID_VALUE;'
p272
ag231
aS'return Summ / nrValues;'
p273
aS'}'
p274
aaa(lp275
(g2
(lp276
g241
ag231
ag242
ag243
ag231
ag231
ag246
ag42
tp277
a(g3
(lp278
g251
ag231
ag231
ag246
ag42
tp279
a(g4
(lp280
g254
ag255
ag256
ag231
ag231
ag240
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag260
ag246
ag42
tp281
a(g5
(lp282
g262
ag263
ag264
ag231
ag265
ag240
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag231
ag273
ag274
ag42
tp283
aag6
a.